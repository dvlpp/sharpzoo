/*! sharp 23-03-2015 */
function activate(a){a.parents(".state").removeClass("state-inactive").addClass("state-active")}function deactivate(a){a.parents(".state").removeClass("state-active").addClass("state-inactive")}function getPostToken(){return $("#formToken input[name=_token]").val()}function manageConditionalDisplay(a){var b=a.data("conditional_display"),c="!"!=b.charAt(0),d=c?b:b.substring(1),e=1;-1!=(valPos=d.indexOf(":"))&&(e=d.substring(valPos+1),d=d.substring(0,valPos),-1!=(valPos=e.indexOf(","))&&(e=e.split(",")));var f=a.parents(".sharp-list-item");if(f.length){if(f.hasClass("template"))return;$stateField=f.find(".sharp-field *[name$=\\["+escapeFieldName(d)+"\\]]")}else $stateField=$("#sharpform").find(".sharp-field *[name="+escapeFieldName(d)+"]");$stateField.length&&($stateField.is(":checkbox")?($stateField.change(function(){checkboxShowHide($(this),a,c)}),checkboxShowHide($stateField,a,c)):$stateField.is("select")&&($stateField.change(function(){selectShowHide($(this),e,a,c)}),selectShowHide($stateField,e,a,c)))}function checkboxShowHide(a,b,c){showHideField(b,a.is(":checked")&&c||!a.is(":checked")&&!c)}function selectShowHide(a,b,c,d){var e=null;$.isArray(b)?e=b:(e=[],e.push(b)),show=!1;for(var f=0;f<e.length&&(b=e[f],!(show=a.find("option:selected").val()==b&&d||a.find("option:selected").val()!=b&&!d));f++);showHideField(c,show)}function showHideField(a,b){b?a.show():a.hide()}function escapeFieldName(a){return a.replace(/(:|\.|\[|\]|~|\\)/g,"\\$1")}$(window).load(function(){$("body.sharp-list table .entity-row .entity-data").each(function(){$(this).data("link")?$(this).click(function(){$("#entity-list.reorder").length||(window.location=$(this).data("link"))}):$(this).parents(".entity-row").addClass("inactive")}),$("body.sharp-list #sharp-reorder").click(function(){$("body").addClass("reorder"),$("table#entity-list tbody").sortable({items:".entity-row",handle:".reorder-handle",axis:"y",helper:function(a,b){var c=b.children(),d=b.clone();return d.children().each(function(a){$(this).width(c.eq(a).outerWidth())}),d}})}),$("body.sharp-list #sharp-reorder-ok").click(function(a){a.preventDefault(),$("body").removeClass("reorder");var b=$(this).attr("href"),c=[];$("#entity-list .entity-row").each(function(){c.push($(this).data("entity_id"))}),$.post(b,{entities:c,_token:getPostToken()},function(a){a.err},"json")}),$("body.sharp-list .sharp-delete").click(function(){confirm($(this).data("confirm"))&&$("form#"+$(this).data("form")).submit()}),$("body#sharp .ajax").click(function(a){a.preventDefault();{var b=$(this),c=$(this).attr("href"),d=$(this).data("success");$(this).data("failure")}$.post(c,{_token:getPostToken()},function(a){a.err||window[d](b,a)},"json")})}),$(window).load(function(){$("#sharpform .sharp-field[data-conditional_display]").each(function(){manageConditionalDisplay($(this))})});